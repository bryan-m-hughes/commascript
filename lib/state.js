"use strict";
var stack = [];
module.exports = {
  currentFile: '',
  handleError: handleError,
  handleInternalError: handleInternalError,
  enterContext: enterContext,
  exitContext: exitContext,
  getCurrentContext: getCurrentContext,
  lookupNamedType: lookupNamedType,
  addNamedType: addNamedType
};
function handleError(node, message) {
  console.error(message + ' ' + exports.currentFile + ':' + node.start.line + ':' + node.start.col);
}
function handleInternalError(message) {
  throw new Error('Internal Error: ' + message + ' This is a bug. Please report it to the project author');
}
function enterContext(config) {
  stack.push({
    symbolTable: {},
    expectedReturnType: config.expectedReturnType
  });
}
function exitContext() {
  stack.pop();
}
function getCurrentContext() {
  return stack[stack.length - 1];
}
function lookupNamedType(name) {
  for (var i = stack.length - 1; i >= 0; i--) {
    var type = stack[i].symbolTable[name];
    if (type) {
      return type;
    }
  }
}
function addNamedType(name, type) {
  getCurrentContext().symbolTable[name] = type;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdCQTtBQUFBLEFBQUksRUFBQSxDQUFBLEtBQUksRUFBSSxHQUFDLENBQUM7QUFFZCxLQUFLLFFBQVEsRUFBSTtBQUNmLFlBQVUsQ0FBRyxHQUFDO0FBQ2QsWUFBVSxDQUFHLFlBQVU7QUFDdkIsb0JBQWtCLENBQUcsb0JBQWtCO0FBQ3ZDLGFBQVcsQ0FBRyxhQUFXO0FBQ3pCLFlBQVUsQ0FBRyxZQUFVO0FBQ3ZCLGtCQUFnQixDQUFHLGtCQUFnQjtBQUNuQyxnQkFBYyxDQUFHLGdCQUFjO0FBQy9CLGFBQVcsQ0FBRyxhQUFXO0FBQUEsQUFDM0IsQ0FBQztBQUVELE9BQVMsWUFBVSxDQUFFLElBQUcsQ0FBRyxDQUFBLE9BQU0sQ0FBRztBQUNsQyxRQUFNLE1BQU0sQUFBQyxDQUFDLE9BQU0sRUFBSSxJQUFFLENBQUEsQ0FBSSxDQUFBLE9BQU0sWUFBWSxDQUFBLENBQUksSUFBRSxDQUFBLENBQUksQ0FBQSxJQUFHLE1BQU0sS0FBSyxDQUFBLENBQUksSUFBRSxDQUFBLENBQUksQ0FBQSxJQUFHLE1BQU0sSUFBSSxDQUFDLENBQUM7QUFDbkc7QUFBQSxBQUVBLE9BQVMsb0JBQWtCLENBQUUsT0FBTSxDQUFHO0FBQ3BDLE1BQU0sSUFBSSxNQUFJLEFBQUMsQ0FBQyxrQkFBaUIsRUFBSSxRQUFNLENBQUEsQ0FDekMseURBQXVELENBQUMsQ0FBQztBQUM3RDtBQUFBLEFBRUEsT0FBUyxhQUFXLENBQUUsTUFBSyxDQUFHO0FBQzVCLE1BQUksS0FBSyxBQUFDLENBQUM7QUFDVCxjQUFVLENBQUcsR0FBQztBQUNkLHFCQUFpQixDQUFHLENBQUEsTUFBSyxtQkFBbUI7QUFBQSxFQUM5QyxDQUFDLENBQUM7QUFDSjtBQUFBLEFBRUEsT0FBUyxZQUFVLENBQUMsQUFBQyxDQUFFO0FBQ3JCLE1BQUksSUFBSSxBQUFDLEVBQUMsQ0FBQztBQUNiO0FBQUEsQUFFQSxPQUFTLGtCQUFnQixDQUFDLEFBQUMsQ0FBRTtBQUMzQixPQUFPLENBQUEsS0FBSSxDQUFFLEtBQUksT0FBTyxFQUFJLEVBQUEsQ0FBQyxDQUFDO0FBQ2hDO0FBQUEsQUFFQSxPQUFTLGdCQUFjLENBQUUsSUFBRyxDQUFHO0FBQzdCLE1BQVMsR0FBQSxDQUFBLENBQUEsRUFBSSxDQUFBLEtBQUksT0FBTyxFQUFJLEVBQUEsQ0FBRyxDQUFBLENBQUEsR0FBSyxFQUFBLENBQUcsQ0FBQSxDQUFBLEVBQUUsQ0FBRztBQUMxQyxBQUFJLE1BQUEsQ0FBQSxJQUFHLEVBQUksQ0FBQSxLQUFJLENBQUUsQ0FBQSxDQUFDLFlBQVksQ0FBRSxJQUFHLENBQUMsQ0FBQztBQUNyQyxPQUFJLElBQUcsQ0FBRztBQUNSLFdBQU8sS0FBRyxDQUFDO0lBQ2I7QUFBQSxFQUNGO0FBQUEsQUFDRjtBQUFBLEFBRUEsT0FBUyxhQUFXLENBQUUsSUFBRyxDQUFHLENBQUEsSUFBRyxDQUFHO0FBQ2hDLGtCQUFnQixBQUFDLEVBQUMsWUFBWSxDQUFFLElBQUcsQ0FBQyxFQUFJLEtBQUcsQ0FBQztBQUM5QztBQUFBIiwiZmlsZSI6InN0YXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcblRoZSBNSVQgTGljZW5zZSAoTUlUKVxuXG5Db3B5cmlnaHQgKGMpIDIwMTMtMjAxNCBCcnlhbiBIdWdoZXMgPGJyeWFuQHRoZW9yZXRpY2FsaWRlYXRpb25zLmNvbT4gKGh0dHA6Ly90aGVvcmV0aWNhbGlkZWF0aW9ucy5jb20pXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cbiovXG5cbnZhciBzdGFjayA9IFtdO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3VycmVudEZpbGU6ICcnLFxuICBoYW5kbGVFcnJvcjogaGFuZGxlRXJyb3IsXG4gIGhhbmRsZUludGVybmFsRXJyb3I6IGhhbmRsZUludGVybmFsRXJyb3IsXG4gIGVudGVyQ29udGV4dDogZW50ZXJDb250ZXh0LFxuICBleGl0Q29udGV4dDogZXhpdENvbnRleHQsXG4gIGdldEN1cnJlbnRDb250ZXh0OiBnZXRDdXJyZW50Q29udGV4dCxcbiAgbG9va3VwTmFtZWRUeXBlOiBsb29rdXBOYW1lZFR5cGUsXG4gIGFkZE5hbWVkVHlwZTogYWRkTmFtZWRUeXBlXG59O1xuXG5mdW5jdGlvbiBoYW5kbGVFcnJvcihub2RlLCBtZXNzYWdlKSB7XG4gIGNvbnNvbGUuZXJyb3IobWVzc2FnZSArICcgJyArIGV4cG9ydHMuY3VycmVudEZpbGUgKyAnOicgKyBub2RlLnN0YXJ0LmxpbmUgKyAnOicgKyBub2RlLnN0YXJ0LmNvbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUludGVybmFsRXJyb3IobWVzc2FnZSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIEVycm9yOiAnICsgbWVzc2FnZSArXG4gICAgJyBUaGlzIGlzIGEgYnVnLiBQbGVhc2UgcmVwb3J0IGl0IHRvIHRoZSBwcm9qZWN0IGF1dGhvcicpO1xufVxuXG5mdW5jdGlvbiBlbnRlckNvbnRleHQoY29uZmlnKSB7XG4gIHN0YWNrLnB1c2goe1xuICAgIHN5bWJvbFRhYmxlOiB7fSxcbiAgICBleHBlY3RlZFJldHVyblR5cGU6IGNvbmZpZy5leHBlY3RlZFJldHVyblR5cGVcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGV4aXRDb250ZXh0KCkge1xuICBzdGFjay5wb3AoKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudENvbnRleHQoKSB7XG4gIHJldHVybiBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbn1cblxuZnVuY3Rpb24gbG9va3VwTmFtZWRUeXBlKG5hbWUpIHtcbiAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIHR5cGUgPSBzdGFja1tpXS5zeW1ib2xUYWJsZVtuYW1lXTtcbiAgICBpZiAodHlwZSkge1xuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFkZE5hbWVkVHlwZShuYW1lLCB0eXBlKSB7XG4gIGdldEN1cnJlbnRDb250ZXh0KCkuc3ltYm9sVGFibGVbbmFtZV0gPSB0eXBlO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9